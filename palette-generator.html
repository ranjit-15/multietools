<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Palette Generator - Multietools</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="css/global.css">
<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:1.5rem;transition:background .3s,color .3s;}
.wrap{max-width:960px;margin:0 auto;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);box-shadow:var(--shadow-md);overflow:hidden;}
header{padding:1.75rem;border-bottom:1px solid var(--border);background:var(--primary-glow);}
h1{font-size:1.8rem;margin-bottom:.35rem;} .muted{color:var(--muted);}
.back{display:inline-flex;align-items:center;gap:.5rem;color:var(--text);text-decoration:none;font-weight:700;margin-bottom:1rem;}
main{padding:1.5rem;display:grid;gap:1.25rem;}
.panel{background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-md);padding:1.25rem;box-shadow:var(--shadow-xs);}
.controls{display:flex;flex-wrap:wrap;gap:1rem;align-items:flex-end;}
.control-group{display:grid;gap:.35rem;}
.control-group label{font-weight:700;font-size:.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;}
.control-group input[type=color]{width:60px;height:48px;border:none;border-radius:8px;cursor:pointer;background:transparent;padding:0;}
.control-group input[type=color]::-webkit-color-swatch-wrapper{padding:1px;}
.control-group input[type=color]::-webkit-color-swatch{border:2px solid var(--border);border-radius:6px;}
.control-group input[type=text]{padding:.6rem .75rem;border:1px solid var(--border);border-radius:var(--radius-md);background:var(--surface);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:.9rem;width:110px;}
.control-group select{padding:.6rem .75rem;border:1px solid var(--border);border-radius:var(--radius-md);background:var(--surface);color:var(--text);font-size:.9rem;min-width:180px;}
.btn{padding:.8rem 1.2rem;border-radius:var(--radius-md);border:none;cursor:pointer;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;font-weight:700;font-size:.9rem;transition:transform .15s;}
.btn:hover{transform:translateY(-1px);} .btn:disabled{opacity:.5;cursor:not-allowed;transform:none;}
.btn-sm{padding:.55rem .85rem;font-size:.8rem;}
.btn-outline{background:var(--surface);border:1px solid var(--border);color:var(--text);}
.btn-outline:hover{border-color:var(--primary);}
.palette-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.75rem;}
.palette-card{border:2px solid var(--border);border-radius:12px;overflow:hidden;cursor:pointer;transition:transform .15s,border-color .15s;position:relative;}
.palette-card:hover{transform:translateY(-3px);border-color:var(--primary);}
.palette-color{height:120px;transition:background .3s;}
.palette-info{padding:.75rem;background:var(--surface);display:flex;justify-content:space-between;align-items:center;}
.palette-hex{font-family:'JetBrains Mono',monospace;font-weight:600;font-size:.85rem;}
.lock-btn{width:28px;height:28px;border:1px solid var(--border);border-radius:6px;background:var(--surface);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;color:var(--muted);transition:color .15s,border-color .15s;}
.lock-btn.locked{color:var(--primary);border-color:var(--primary);}
.lock-btn:hover{color:var(--primary);}
h3{font-size:1rem;margin-bottom:.75rem;}
.export-area{width:100%;min-height:100px;padding:1rem;border:1px solid var(--border);border-radius:var(--radius-md);background:var(--surface);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:.85rem;resize:vertical;}
.export-controls{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem;}
.toast{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%) translateY(20px);padding:.75rem 1.5rem;border-radius:50px;background:var(--surface);border:1px solid var(--border);box-shadow:var(--shadow-lg);font-weight:600;font-size:.9rem;z-index:9999;opacity:0;transition:opacity .3s,transform .3s;pointer-events:none;}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0);}
</style>    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head><body>
<div class="wrap"><header>
<a class="back" href="tools.html"><i class="fas fa-arrow-left"></i> Back to Tools</a>
<h1><i class="fas fa-palette"></i> Palette Generator</h1>
<p class="muted">Generate harmonious color palettes with various algorithms.</p>
</header><main>

<div class="panel">
<div class="controls">
  <div class="control-group">
    <label>Base Color</label>
    <input type="color" id="baseColor" value="#7c3aed">
  </div>
  <div class="control-group">
    <label>HEX</label>
    <input type="text" id="baseHex" value="#7c3aed" maxlength="7" spellcheck="false">
  </div>
  <div class="control-group">
    <label>Algorithm</label>
    <select id="algorithm">
      <option value="complementary">Complementary</option>
      <option value="analogous">Analogous</option>
      <option value="triadic">Triadic</option>
      <option value="tetradic">Tetradic</option>
      <option value="split">Split-Complementary</option>
      <option value="monochromatic">Monochromatic</option>
    </select>
  </div>
  <button class="btn" onclick="generate()"><i class="fas fa-sync-alt"></i> Generate</button>
  <button class="btn btn-outline" onclick="randomPalette()"><i class="fas fa-dice"></i> Random</button>
</div>
</div>

<div class="panel">
<div class="palette-grid" id="paletteGrid"></div>
</div>

<div class="panel">
<h3><i class="fas fa-file-export"></i> Export Palette</h3>
<div class="export-controls">
  <button class="btn btn-sm" onclick="exportAs('css')">CSS Variables</button>
  <button class="btn btn-sm" onclick="exportAs('json')">JSON</button>
  <button class="btn btn-sm" onclick="exportAs('text')">Plain Text</button>
  <button class="btn btn-sm btn-outline" onclick="copyExport()"><i class="fas fa-copy"></i> Copy</button>
</div>
<textarea class="export-area" id="exportArea" readonly></textarea>
</div>

</main></div>
<div class="toast" id="toast"></div>
<script src="js/global.js"></script>
<script>
function showToast(m){const t=document.getElementById('toast');t.textContent=m;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),3000);}

const baseColor=document.getElementById('baseColor');
const baseHex=document.getElementById('baseHex');
const algorithm=document.getElementById('algorithm');
const paletteGrid=document.getElementById('paletteGrid');
const exportArea=document.getElementById('exportArea');

let palette=[];
let locks={};

function hexToHsl(hex){
  hex=hex.replace('#','');
  if(hex.length===3)hex=hex.split('').map(c=>c+c).join('');
  const r=parseInt(hex.substring(0,2),16)/255;
  const g=parseInt(hex.substring(2,4),16)/255;
  const b=parseInt(hex.substring(4,6),16)/255;
  const max=Math.max(r,g,b),min=Math.min(r,g,b);
  let h,s,l=(max+min)/2;
  if(max===min){h=s=0;}else{
    const d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);
    switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
    h*=60;
  }
  return[h,s*100,l*100];
}

function hslToHex(h,s,l){
  h=((h%360)+360)%360;s/=100;l/=100;
  const a=s*Math.min(l,1-l);
  const f=n=>{const k=(n+h/30)%12;return l-a*Math.max(Math.min(k-3,9-k,1),-1);};
  return '#'+[f(0),f(8),f(4)].map(x=>Math.round(Math.max(0,Math.min(1,x))*255).toString(16).padStart(2,'0')).join('');
}

function generatePalette(hex,algo){
  const[h,s,l]=hexToHsl(hex);
  switch(algo){
    case 'complementary':
      return[{h,s,l},{h:(h+180)%360,s,l},{h,s:Math.max(0,s-15),l:Math.min(100,l+15)},{h:(h+180)%360,s:Math.max(0,s-15),l:Math.min(100,l+15)},{h:(h+180)%360,s,l:Math.max(0,l-15)}];
    case 'analogous':
      return[{h:(h-30+360)%360,s,l},{h:(h-15+360)%360,s,l},{h,s,l},{h:(h+15)%360,s,l},{h:(h+30)%360,s,l}];
    case 'triadic':
      return[{h,s,l},{h:(h+120)%360,s,l},{h:(h+240)%360,s,l},{h:(h+120)%360,s:Math.max(0,s-20),l:Math.min(100,l+10)},{h:(h+240)%360,s:Math.max(0,s-20),l:Math.min(100,l+10)}];
    case 'tetradic':
      return[{h,s,l},{h:(h+90)%360,s,l},{h:(h+180)%360,s,l},{h:(h+270)%360,s,l},{h,s:Math.max(0,s-20),l:Math.min(100,l+20)}];
    case 'split':
      return[{h,s,l},{h:(h+150)%360,s,l},{h:(h+210)%360,s,l},{h:(h+150)%360,s,l:Math.min(100,l+15)},{h:(h+210)%360,s,l:Math.max(0,l-15)}];
    case 'monochromatic':
      return[{h,s,l:Math.max(0,l-30)},{h,s,l:Math.max(0,l-15)},{h,s,l},{h,s,l:Math.min(100,l+15)},{h,s,l:Math.min(100,l+30)}];
    default:return[{h,s,l}];
  }
}

function generate(){
  const hslColors=generatePalette(baseColor.value,algorithm.value);
  palette=hslColors.map((c,i)=>{
    if(locks[i])return palette[i];
    return hslToHex(c.h,c.s,c.l);
  });
  renderPalette();
  exportAs('css');
}

function renderPalette(){
  paletteGrid.innerHTML=palette.map((hex,i)=>{
    const isLocked=!!locks[i];
    const lum=relativeLum(hex);
    const textColor=lum>0.179?'#000':'#fff';
    return `<div class="palette-card" onclick="copyColor('${hex}')">
      <div class="palette-color" style="background:${hex};color:${textColor};display:flex;align-items:center;justify-content:center;font-weight:700;font-size:.9rem;">${hex}</div>
      <div class="palette-info">
        <span class="palette-hex">${hex}</span>
        <button class="lock-btn ${isLocked?'locked':''}" onclick="event.stopPropagation();toggleLock(${i})" title="${isLocked?'Unlock':'Lock'}">
          <i class="fas fa-${isLocked?'lock':'lock-open'}"></i>
        </button>
      </div>
    </div>`;
  }).join('');
}

function relativeLum(hex){
  hex=hex.replace('#','');
  const r=parseInt(hex.substring(0,2),16)/255;
  const g=parseInt(hex.substring(2,4),16)/255;
  const b=parseInt(hex.substring(4,6),16)/255;
  const[rs,gs,bs]=[r,g,b].map(c=>c<=0.03928?c/12.92:Math.pow((c+0.055)/1.055,2.4));
  return 0.2126*rs+0.7152*gs+0.0722*bs;
}

function toggleLock(i){locks[i]=!locks[i];renderPalette();}
function copyColor(hex){navigator.clipboard.writeText(hex);showToast(hex+' copied!');}

function randomPalette(){
  const hex='#'+Math.floor(Math.random()*16777215).toString(16).padStart(6,'0');
  baseColor.value=hex;baseHex.value=hex;
  const algos=['complementary','analogous','triadic','tetradic','split','monochromatic'];
  algorithm.value=algos[Math.floor(Math.random()*algos.length)];
  locks={};generate();showToast('Random palette generated!');
}

function exportAs(format){
  let output='';
  switch(format){
    case 'css':
      output=':root {\n'+palette.map((hex,i)=>`  --color-${i+1}: ${hex};`).join('\n')+'\n}';break;
    case 'json':
      output=JSON.stringify({palette:palette},null,2);break;
    case 'text':
      output=palette.join('\n');break;
  }
  exportArea.value=output;
}
function copyExport(){navigator.clipboard.writeText(exportArea.value);showToast('Exported palette copied!');}

baseColor.addEventListener('input',()=>{baseHex.value=baseColor.value;generate();});
baseHex.addEventListener('input',()=>{
  let v=baseHex.value.trim();if(v[0]!=='#')v='#'+v;
  if(/^#[\da-f]{6}$/i.test(v)){baseColor.value=v;generate();}
});
algorithm.addEventListener('change',()=>{locks={};generate();});

generate();
</script></body></html>
