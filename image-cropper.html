<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Cropper – MultiTools</title>
    <meta name="description" content="Crop images to any size or aspect ratio in your browser. Free online image cropper — no sign-up. Multietools.">
    <meta property="og:title" content="Image Cropper – MultiTools">
    <meta property="og:description" content="Crop images to any size or aspect ratio in your browser. Free online image cropper — no sign-up. Multietools.">
    <meta property="og:type" content="website">
    <link rel="canonical" href="https://ranjit-15.github.io/multietools/htdocs/image-cropper.html">
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <style>
        .wrap{max-width:1100px;margin:0 auto;padding:1.5rem}
        header{margin-bottom:1.5rem}
        header .back{color:var(--primary);text-decoration:none;font-size:.92rem;display:inline-flex;align-items:center;gap:.35rem;margin-bottom:.75rem}
        header .back:hover{text-decoration:underline}
        header h1{font-size:1.6rem;color:var(--text);display:flex;align-items:center;gap:.55rem;margin:0 0 .35rem}
        header h1 i{color:var(--primary)}
        .muted{color:var(--muted);font-size:.93rem}

        /* Upload zone */
        .upload-zone{border:2px dashed var(--border);border-radius:var(--radius-lg);padding:3rem 1.5rem;text-align:center;cursor:pointer;transition:border-color .25s,background .25s;background:var(--surface)}
        .upload-zone:hover,.upload-zone.dragover{border-color:var(--primary);background:color-mix(in srgb,var(--primary) 6%,transparent)}
        .upload-zone i{font-size:2.4rem;color:var(--primary);margin-bottom:.75rem}
        .upload-zone p{color:var(--muted);margin:.25rem 0}
        .upload-zone .browse-btn{display:inline-block;margin-top:.75rem;padding:.5rem 1.2rem;background:var(--primary);color:#fff;border-radius:var(--radius-sm);font-size:.88rem;cursor:pointer;transition:box-shadow .2s}
        .upload-zone .browse-btn:hover{box-shadow:0 0 12px var(--primary-glow)}
        #fileInput{display:none}

        /* Panels */
        .panel{background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-lg);padding:1.25rem;margin-bottom:1.25rem;box-shadow:var(--shadow-xs)}
        .panel-title{font-size:1rem;font-weight:600;color:var(--text);margin:0 0 .85rem;display:flex;align-items:center;gap:.45rem}
        .panel-title i{color:var(--primary);font-size:.92rem}

        /* Toolbar */
        .toolbar{display:flex;flex-wrap:wrap;gap:.6rem;align-items:center;margin-bottom:1rem}
        .toolbar label{color:var(--muted);font-size:.85rem;margin-right:.15rem}
        .aspect-btns{display:flex;gap:.4rem;flex-wrap:wrap}
        .aspect-btns button{padding:.35rem .75rem;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-alt);color:var(--text);font-size:.82rem;cursor:pointer;transition:all .2s}
        .aspect-btns button:hover{border-color:var(--primary);color:var(--primary)}
        .aspect-btns button.active{background:var(--primary);color:#fff;border-color:var(--primary)}

        .manual-inputs{display:flex;flex-wrap:wrap;gap:.55rem;align-items:center;margin-bottom:1rem}
        .manual-inputs .field{display:flex;align-items:center;gap:.3rem}
        .manual-inputs .field span{color:var(--muted);font-size:.82rem;min-width:1.6rem;text-align:right}
        .manual-inputs input[type=number]{width:70px;padding:.32rem .45rem;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-alt);color:var(--text);font-size:.85rem;text-align:center}
        .manual-inputs input[type=number]:focus{outline:none;border-color:var(--primary)}

        /* Canvas area */
        .canvas-wrapper{position:relative;display:flex;justify-content:center;background:var(--bg-alt);border-radius:var(--radius-md);overflow:hidden;min-height:200px;border:1px solid var(--border-light)}
        .canvas-wrapper canvas{display:block;cursor:crosshair;max-width:100%}

        /* Info bar */
        .info-bar{display:flex;flex-wrap:wrap;gap:1.2rem;margin-top:.85rem;font-size:.85rem;color:var(--muted)}
        .info-bar span{display:flex;align-items:center;gap:.3rem}
        .info-bar i{color:var(--primary);font-size:.8rem}

        /* Preview panel */
        .preview-section{display:flex;flex-direction:column;align-items:center;gap:1rem}
        .preview-img-wrap{background:var(--bg-alt);border:1px solid var(--border-light);border-radius:var(--radius-md);padding:.75rem;text-align:center;min-height:120px;display:flex;align-items:center;justify-content:center;width:100%;overflow:auto}
        .preview-img-wrap img{max-width:100%;max-height:320px;border-radius:var(--radius-sm)}
        .preview-img-wrap .placeholder{color:var(--muted);font-size:.88rem}

        /* Output controls */
        .output-controls{display:flex;flex-wrap:wrap;gap:.65rem;align-items:center}
        .output-controls select{padding:.4rem .7rem;border:1px solid var(--border);border-radius:var(--radius-sm);background:var(--bg-alt);color:var(--text);font-size:.85rem;cursor:pointer}
        .output-controls select:focus{outline:none;border-color:var(--primary)}

        .btn{padding:.5rem 1.15rem;border:none;border-radius:var(--radius-sm);font-size:.88rem;cursor:pointer;display:inline-flex;align-items:center;gap:.4rem;transition:all .2s}
        .btn-primary{background:var(--primary);color:#fff}
        .btn-primary:hover{box-shadow:0 0 12px var(--primary-glow)}
        .btn-primary:disabled{opacity:.45;cursor:not-allowed;box-shadow:none}
        .btn-outline{background:transparent;border:1px solid var(--border);color:var(--text)}
        .btn-outline:hover{border-color:var(--primary);color:var(--primary)}
        .btn-error{background:var(--error);color:#fff}
        .btn-error:hover{opacity:.88}

        /* Layout grid */
        .editor-grid{display:grid;grid-template-columns:1fr;gap:1.25rem}
        @media(min-width:820px){.editor-grid{grid-template-columns:2fr 1fr}}

        /* Toast */
        #toast{position:fixed;bottom:1.5rem;right:1.5rem;z-index:9999;display:flex;flex-direction:column;gap:.5rem;pointer-events:none}
        .toast-msg{padding:.65rem 1.1rem;border-radius:var(--radius-sm);color:#fff;font-size:.88rem;display:flex;align-items:center;gap:.45rem;animation:toastIn .3s ease;pointer-events:auto;box-shadow:var(--shadow-md)}
        .toast-msg.success{background:var(--success)}
        .toast-msg.error{background:var(--error)}
        .toast-msg.info{background:var(--primary)}
        @keyframes toastIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
        @keyframes toastOut{from{opacity:1}to{opacity:0;transform:translateY(12px)}}

        .hidden{display:none!important}

        @media(max-width:600px){
            .wrap{padding:1rem}
            header h1{font-size:1.25rem}
            .manual-inputs input[type=number]{width:58px}
        }
    </style>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
    <div class="wrap">
        <header>
            <a href="tools.html" class="back"><i class="fa-solid fa-arrow-left"></i> Back to Tools</a>
            <h1><i class="fa-solid fa-crop-alt"></i> Image Cropper</h1>
            <p class="muted">Upload an image and drag to select a crop area. Choose aspect ratios, fine-tune with manual inputs, then download the cropped result.</p>
        </header>

        <main>
            <!-- Upload Zone -->
            <div class="panel" id="uploadPanel">
                <div class="upload-zone" id="uploadZone">
                    <i class="fa-solid fa-cloud-arrow-up"></i>
                    <p><strong>Drag &amp; drop an image here</strong></p>
                    <p>or</p>
                    <span class="browse-btn" id="browseBtn">Browse Files</span>
                    <p style="margin-top:.5rem;font-size:.8rem">Supports PNG, JPEG, WEBP, BMP, GIF</p>
                    <input type="file" id="fileInput" accept="image/*" />
                </div>
            </div>

            <!-- Editor (hidden until image loaded) -->
            <div id="editorArea" class="hidden">
                <!-- Toolbar -->
                <div class="panel">
                    <div class="panel-title"><i class="fa-solid fa-sliders"></i> Crop Settings</div>
                    <div class="toolbar">
                        <label>Aspect Ratio:</label>
                        <div class="aspect-btns" id="aspectBtns">
                            <button data-ratio="free" class="active">Free</button>
                            <button data-ratio="1:1">1:1</button>
                            <button data-ratio="4:3">4:3</button>
                            <button data-ratio="16:9">16:9</button>
                            <button data-ratio="3:2">3:2</button>
                        </div>
                    </div>
                    <div class="manual-inputs" id="manualInputs">
                        <div class="field"><span>X</span><input type="number" id="inpX" min="0" value="0" /></div>
                        <div class="field"><span>Y</span><input type="number" id="inpY" min="0" value="0" /></div>
                        <div class="field"><span>W</span><input type="number" id="inpW" min="1" value="0" /></div>
                        <div class="field"><span>H</span><input type="number" id="inpH" min="1" value="0" /></div>
                        <button class="btn btn-outline" id="applyManualBtn"><i class="fa-solid fa-check"></i> Apply</button>
                    </div>
                </div>

                <div class="editor-grid">
                    <!-- Canvas Panel -->
                    <div class="panel">
                        <div class="panel-title"><i class="fa-solid fa-image"></i> Source Image</div>
                        <div class="canvas-wrapper" id="canvasWrapper">
                            <canvas id="mainCanvas"></canvas>
                        </div>
                        <div class="info-bar" id="infoBar">
                            <span><i class="fa-solid fa-expand"></i> Image: <em id="imgDims">–</em></span>
                            <span><i class="fa-solid fa-crop"></i> Selection: <em id="selDims">–</em></span>
                            <span><i class="fa-solid fa-file"></i> Original: <em id="origSize">–</em></span>
                        </div>
                    </div>

                    <!-- Preview & Download -->
                    <div>
                        <div class="panel preview-section">
                            <div class="panel-title"><i class="fa-solid fa-eye"></i> Crop Preview</div>
                            <div class="preview-img-wrap" id="previewWrap">
                                <span class="placeholder">Drag on canvas to select area</span>
                            </div>
                            <div class="output-controls">
                                <select id="formatSelect">
                                    <option value="image/png">PNG</option>
                                    <option value="image/jpeg">JPEG</option>
                                    <option value="image/webp">WEBP</option>
                                </select>
                                <button class="btn btn-primary" id="downloadBtn" disabled><i class="fa-solid fa-download"></i> Download</button>
                            </div>
                            <div id="cropFileSize" class="muted" style="font-size:.82rem;margin-top:.2rem"></div>
                        </div>
                        <div style="margin-top:.85rem;display:flex;gap:.55rem;flex-wrap:wrap">
                            <button class="btn btn-outline" id="resetSelBtn"><i class="fa-solid fa-rotate-left"></i> Reset Selection</button>
                            <button class="btn btn-error" id="newImgBtn"><i class="fa-solid fa-xmark"></i> New Image</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="toast"></div>
    <script src="js/global.js"></script>
    <script>
    (() => {
        /* ── Helpers ─────────────────────────────────── */
        const $ = s => document.querySelector(s);
        const toast = (msg, type = 'info', ms = 3000) => {
            const el = document.createElement('div');
            el.className = `toast-msg ${type}`;
            const icon = type === 'success' ? 'fa-circle-check' : type === 'error' ? 'fa-circle-xmark' : 'fa-circle-info';
            el.innerHTML = `<i class="fa-solid ${icon}"></i> ${msg}`;
            $('#toast').appendChild(el);
            setTimeout(() => { el.style.animation = 'toastOut .3s ease forwards'; setTimeout(() => el.remove(), 300); }, ms);
        };
        const fmtBytes = b => b < 1024 ? b + ' B' : b < 1048576 ? (b / 1024).toFixed(1) + ' KB' : (b / 1048576).toFixed(2) + ' MB';

        /* ── State ───────────────────────────────────── */
        let img = null;           // loaded Image element
        let origFileSize = 0;
        let canvasScale = 1;      // ratio: displayed / natural
        let aspectRatio = null;   // null = free
        let selection = null;     // {x, y, w, h} in DISPLAY coords
        let isDragging = false;
        let dragStart = { x: 0, y: 0 };

        /* ── DOM refs ────────────────────────────────── */
        const uploadZone = $('#uploadZone');
        const fileInput = $('#fileInput');
        const editorArea = $('#editorArea');
        const uploadPanel = $('#uploadPanel');
        const canvas = $('#mainCanvas');
        const ctx = canvas.getContext('2d');
        const inpX = $('#inpX'), inpY = $('#inpY'), inpW = $('#inpW'), inpH = $('#inpH');

        /* ── Upload handling ─────────────────────────── */
        const handleFile = file => {
            if (!file || !file.type.startsWith('image/')) { toast('Please select a valid image file.', 'error'); return; }
            origFileSize = file.size;
            const reader = new FileReader();
            reader.onload = e => {
                const i = new Image();
                i.onload = () => { img = i; initEditor(); toast('Image loaded!', 'success'); };
                i.onerror = () => toast('Failed to decode image.', 'error');
                i.src = e.target.result;
            };
            reader.readAsDataURL(file);
        };

        uploadZone.addEventListener('click', () => fileInput.click());
        $('#browseBtn').addEventListener('click', e => { e.stopPropagation(); fileInput.click(); });
        fileInput.addEventListener('change', e => { if (e.target.files[0]) handleFile(e.target.files[0]); });

        uploadZone.addEventListener('dragover', e => { e.preventDefault(); uploadZone.classList.add('dragover'); });
        uploadZone.addEventListener('dragleave', () => uploadZone.classList.remove('dragover'));
        uploadZone.addEventListener('drop', e => { e.preventDefault(); uploadZone.classList.remove('dragover'); if (e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]); });

        /* ── Editor init ─────────────────────────────── */
        const initEditor = () => {
            uploadPanel.classList.add('hidden');
            editorArea.classList.remove('hidden');
            selection = null;
            fitCanvas();
            drawCanvas();
            $('#imgDims').textContent = `${img.naturalWidth} × ${img.naturalHeight}`;
            $('#origSize').textContent = fmtBytes(origFileSize);
            $('#selDims').textContent = '–';
            $('#previewWrap').innerHTML = '<span class="placeholder">Drag on canvas to select area</span>';
            $('#downloadBtn').disabled = true;
            $('#cropFileSize').textContent = '';
            setActiveAspect('free');
        };

        const fitCanvas = () => {
            const wrapper = $('#canvasWrapper');
            const maxW = wrapper.clientWidth - 2;
            const maxH = Math.min(window.innerHeight * 0.65, 600);
            const scaleW = maxW / img.naturalWidth;
            const scaleH = maxH / img.naturalHeight;
            canvasScale = Math.min(scaleW, scaleH, 1);
            canvas.width = Math.round(img.naturalWidth * canvasScale);
            canvas.height = Math.round(img.naturalHeight * canvasScale);
        };

        /* ── Draw canvas with overlay ────────────────── */
        const drawCanvas = () => {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

            if (selection && selection.w > 0 && selection.h > 0) {
                const { x, y, w, h } = selection;
                // dark overlay
                ctx.fillStyle = 'rgba(0,0,0,0.55)';
                // top
                ctx.fillRect(0, 0, canvas.width, y);
                // bottom
                ctx.fillRect(0, y + h, canvas.width, canvas.height - y - h);
                // left
                ctx.fillRect(0, y, x, h);
                // right
                ctx.fillRect(x + w, y, canvas.width - x - w, h);

                // dashed border
                ctx.setLineDash([6, 4]);
                ctx.strokeStyle = '#fff';
                ctx.lineWidth = 2;
                ctx.strokeRect(x, y, w, h);
                ctx.setLineDash([]);

                // corner handles
                const hs = 6;
                ctx.fillStyle = '#fff';
                [[x, y], [x + w, y], [x, y + h], [x + w, y + h]].forEach(([cx, cy]) => {
                    ctx.fillRect(cx - hs / 2, cy - hs / 2, hs, hs);
                });
            }
        };

        /* ── Mouse / Touch crop interaction ──────────── */
        const getPos = e => {
            const r = canvas.getBoundingClientRect();
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const clientY = e.touches ? e.touches[0].clientY : e.clientY;
            return { x: clientX - r.left, y: clientY - r.top };
        };

        const clamp = (v, lo, hi) => Math.max(lo, Math.min(hi, v));

        const startDrag = e => {
            e.preventDefault();
            const pos = getPos(e);
            isDragging = true;
            dragStart = { x: pos.x, y: pos.y };
            selection = { x: pos.x, y: pos.y, w: 0, h: 0 };
        };

        const moveDrag = e => {
            if (!isDragging) return;
            e.preventDefault();
            const pos = getPos(e);
            let x = Math.min(dragStart.x, pos.x);
            let y = Math.min(dragStart.y, pos.y);
            let w = Math.abs(pos.x - dragStart.x);
            let h = Math.abs(pos.y - dragStart.y);

            // enforce aspect ratio
            if (aspectRatio) {
                if (w / h > aspectRatio) {
                    w = h * aspectRatio;
                } else {
                    h = w / aspectRatio;
                }
                // recalculate origin when dragging top-left
                if (pos.x < dragStart.x) x = dragStart.x - w;
                if (pos.y < dragStart.y) y = dragStart.y - h;
            }

            // clamp within canvas
            x = clamp(x, 0, canvas.width);
            y = clamp(y, 0, canvas.height);
            if (x + w > canvas.width) w = canvas.width - x;
            if (y + h > canvas.height) h = canvas.height - y;

            selection = { x, y, w, h };
            drawCanvas();
            syncInputs();
        };

        const endDrag = () => {
            if (!isDragging) return;
            isDragging = false;
            if (selection && selection.w > 2 && selection.h > 2) {
                updatePreview();
            } else {
                selection = null;
                drawCanvas();
                $('#previewWrap').innerHTML = '<span class="placeholder">Drag on canvas to select area</span>';
                $('#downloadBtn').disabled = true;
                $('#selDims').textContent = '–';
                $('#cropFileSize').textContent = '';
            }
        };

        canvas.addEventListener('mousedown', startDrag);
        canvas.addEventListener('mousemove', moveDrag);
        window.addEventListener('mouseup', endDrag);
        canvas.addEventListener('touchstart', startDrag, { passive: false });
        canvas.addEventListener('touchmove', moveDrag, { passive: false });
        window.addEventListener('touchend', endDrag);

        /* ── Sync inputs ↔ selection ─────────────────── */
        const toNatural = v => Math.round(v / canvasScale);
        const toDisplay = v => v * canvasScale;

        const syncInputs = () => {
            if (!selection) return;
            inpX.value = toNatural(selection.x);
            inpY.value = toNatural(selection.y);
            inpW.value = toNatural(selection.w);
            inpH.value = toNatural(selection.h);
            $('#selDims').textContent = `${toNatural(selection.w)} × ${toNatural(selection.h)}`;
        };

        $('#applyManualBtn').addEventListener('click', () => {
            if (!img) return;
            let x = clamp(parseInt(inpX.value) || 0, 0, img.naturalWidth - 1);
            let y = clamp(parseInt(inpY.value) || 0, 0, img.naturalHeight - 1);
            let w = clamp(parseInt(inpW.value) || 1, 1, img.naturalWidth - x);
            let h = clamp(parseInt(inpH.value) || 1, 1, img.naturalHeight - y);

            if (aspectRatio) {
                if (w / h > aspectRatio) w = Math.round(h * aspectRatio);
                else h = Math.round(w / aspectRatio);
                w = clamp(w, 1, img.naturalWidth - x);
                h = clamp(h, 1, img.naturalHeight - y);
            }

            selection = { x: toDisplay(x), y: toDisplay(y), w: toDisplay(w), h: toDisplay(h) };
            drawCanvas();
            syncInputs();
            updatePreview();
            toast('Selection applied', 'success');
        });

        /* ── Aspect ratio buttons ────────────────────── */
        const ratioMap = { 'free': null, '1:1': 1, '4:3': 4 / 3, '16:9': 16 / 9, '3:2': 3 / 2 };

        const setActiveAspect = key => {
            aspectRatio = ratioMap[key];
            document.querySelectorAll('#aspectBtns button').forEach(b => b.classList.toggle('active', b.dataset.ratio === key));
        };

        $('#aspectBtns').addEventListener('click', e => {
            const btn = e.target.closest('button');
            if (!btn) return;
            setActiveAspect(btn.dataset.ratio);
            // reset selection when aspect changes
            if (selection) {
                selection = null;
                drawCanvas();
                $('#previewWrap').innerHTML = '<span class="placeholder">Drag to select with new ratio</span>';
                $('#downloadBtn').disabled = true;
                $('#selDims').textContent = '–';
                $('#cropFileSize').textContent = '';
            }
        });

        /* ── Preview & crop ──────────────────────────── */
        const getCroppedBlob = (format) => {
            return new Promise(resolve => {
                const sx = toNatural(selection.x);
                const sy = toNatural(selection.y);
                const sw = toNatural(selection.w);
                const sh = toNatural(selection.h);
                const offscreen = document.createElement('canvas');
                offscreen.width = sw;
                offscreen.height = sh;
                const octx = offscreen.getContext('2d');
                octx.drawImage(img, sx, sy, sw, sh, 0, 0, sw, sh);
                const quality = format === 'image/png' ? undefined : 0.92;
                offscreen.toBlob(blob => resolve({ blob, dataUrl: offscreen.toDataURL(format, quality), sw, sh }), format, quality);
            });
        };

        const updatePreview = async () => {
            if (!selection || selection.w < 2 || selection.h < 2) return;
            const format = $('#formatSelect').value;
            const { blob, dataUrl, sw, sh } = await getCroppedBlob(format);
            $('#previewWrap').innerHTML = `<img src="${dataUrl}" alt="Crop preview" />`;
            $('#downloadBtn').disabled = false;
            syncInputs();
            if (blob) {
                $('#cropFileSize').textContent = `Cropped: ${sw} × ${sh} · ${fmtBytes(blob.size)}`;
            }
        };

        $('#formatSelect').addEventListener('change', () => { if (selection && selection.w > 2) updatePreview(); });

        /* ── Download ────────────────────────────────── */
        $('#downloadBtn').addEventListener('click', async () => {
            if (!selection) return;
            const format = $('#formatSelect').value;
            const ext = format.split('/')[1];
            const { blob } = await getCroppedBlob(format);
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `cropped-image.${ext}`;
            a.click();
            URL.revokeObjectURL(url);
            toast('Cropped image downloaded!', 'success');
        });

        /* ── Reset / New ─────────────────────────────── */
        $('#resetSelBtn').addEventListener('click', () => {
            selection = null;
            drawCanvas();
            inpX.value = 0; inpY.value = 0; inpW.value = 0; inpH.value = 0;
            $('#previewWrap').innerHTML = '<span class="placeholder">Drag on canvas to select area</span>';
            $('#downloadBtn').disabled = true;
            $('#selDims').textContent = '–';
            $('#cropFileSize').textContent = '';
            toast('Selection cleared', 'info');
        });

        $('#newImgBtn').addEventListener('click', () => {
            img = null;
            selection = null;
            origFileSize = 0;
            fileInput.value = '';
            editorArea.classList.add('hidden');
            uploadPanel.classList.remove('hidden');
            toast('Ready for a new image', 'info');
        });

        /* ── Resize handling ─────────────────────────── */
        let resizeTimer;
        window.addEventListener('resize', () => {
            if (!img) return;
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                const prevScale = canvasScale;
                fitCanvas();
                if (selection) {
                    const ratio = canvasScale / prevScale;
                    selection.x *= ratio;
                    selection.y *= ratio;
                    selection.w *= ratio;
                    selection.h *= ratio;
                }
                drawCanvas();
                syncInputs();
            }, 150);
        });
    })();
    </script>
</body>
</html>
