<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Barcode Scanner - Multietools</title>
	<meta name="description" content="Scan barcodes from your camera or uploaded images instantly. Free online barcode scanner — no app needed. Multietools.">
	<meta property="og:title" content="Barcode Scanner - Multietools">
	<meta property="og:description" content="Scan barcodes from your camera or uploaded images instantly. Free online barcode scanner — no app needed. Multietools.">
	<meta property="og:type" content="website">
	<link rel="canonical" href="https://ranjit-15.github.io/multietools/htdocs/barcode-scanner.html">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<link rel="stylesheet" href="css/global.css">
	<style>
		*{box-sizing:border-box;margin:0;padding:0;}
		body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;padding:1.5rem;transition:background .3s,color .3s;}
		.wrap{max-width:960px;margin:0 auto;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-lg);box-shadow:var(--shadow-md);overflow:hidden;}
		header{padding:1.75rem;border-bottom:1px solid var(--border);background:var(--primary-glow);}
		h1{font-size:1.8rem;margin-bottom:.35rem;} .muted{color:var(--muted);}
		.back{display:inline-flex;align-items:center;gap:.5rem;color:var(--text);text-decoration:none;font-weight:700;margin-bottom:1rem;}
		main{padding:1.5rem;display:grid;gap:1.25rem;}
		.panel{background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-md);padding:1.25rem;box-shadow:var(--shadow-xs);}

		label{display:block;font-weight:700;margin-bottom:.4rem;font-size:.92rem;}
		select{width:100%;padding:.75rem .9rem;border-radius:var(--radius-sm);border:1px solid var(--border);background:var(--bg-alt);color:var(--text);font-size:.95rem;font-family:inherit;}
		select:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-glow);}

		.btn{padding:.8rem 1.2rem;border-radius:var(--radius-sm);border:none;cursor:pointer;font-weight:700;font-size:.92rem;display:inline-flex;align-items:center;gap:.5rem;transition:transform .15s,box-shadow .2s;}
		.btn-primary{background:linear-gradient(135deg,var(--primary),var(--primary-light));color:#fff;box-shadow:var(--shadow-sm);}
		.btn-primary:hover{transform:translateY(-1px);box-shadow:var(--shadow-md);}
		.btn-danger{background:var(--error);color:#fff;}
		.btn-danger:hover{opacity:.9;}
		.btn-outline{background:transparent;border:1px solid var(--border);color:var(--text);}
		.btn-outline:hover{border-color:var(--primary);color:var(--primary);}
		.actions{display:flex;gap:.75rem;flex-wrap:wrap;align-items:center;}

		/* Camera */
		.camera-box{position:relative;width:100%;max-width:600px;margin:0 auto;background:#0f0e1a;border-radius:var(--radius-md);overflow:hidden;display:none;}
		.camera-box video{width:100%;display:block;}
		#scanner-region{width:100%;min-height:300px;}

		/* Upload */
		.drop-zone{border:2px dashed var(--border);border-radius:var(--radius-md);padding:2rem;text-align:center;cursor:pointer;transition:border-color .2s,background .2s;color:var(--muted);}
		.drop-zone:hover,.drop-zone.dragover{border-color:var(--primary);background:var(--primary-glow);}
		.drop-zone i{font-size:2rem;margin-bottom:.5rem;display:block;}
		.file-input{display:none;}

		/* Result */
		.result-panel{display:none;background:var(--bg-alt);border:2px solid var(--success);border-radius:var(--radius-md);padding:1.25rem;}
		.result-panel h3{color:var(--success);display:flex;align-items:center;gap:.5rem;margin-bottom:.75rem;}
		.result-text{background:var(--surface);border:1px solid var(--border-light);border-radius:var(--radius-sm);padding:.9rem;font-family:'Courier New',monospace;word-break:break-all;margin-bottom:.5rem;font-size:.95rem;}
		.result-meta{color:var(--muted);font-size:.85rem;margin-bottom:.75rem;}
		.result-link{color:var(--primary);text-decoration:underline;word-break:break-all;}

		.toast{position:fixed;bottom:2rem;right:2rem;background:var(--primary);color:#fff;padding:.85rem 1.5rem;border-radius:var(--radius-md);font-weight:700;font-size:.92rem;box-shadow:var(--shadow-lg);transform:translateY(120%);opacity:0;transition:transform .35s var(--ease-bounce),opacity .3s;z-index:9999;display:flex;align-items:center;gap:.5rem;}
		.toast.show{transform:translateY(0);opacity:1;}

		.info-box{background:var(--bg-alt);border-left:4px solid var(--primary);border-radius:var(--radius-sm);padding:1rem 1.25rem;color:var(--muted);font-size:.9rem;}
		.info-box h4{color:var(--primary);margin-bottom:.5rem;}
		.info-box ul{margin-left:1.25rem;}
		.info-box li{margin:.35rem 0;}

		/* html5-qrcode overrides */
		#scanner-region img[alt="Info icon"]{display:none!important;}
		#scanner-region video{border-radius:var(--radius-sm)!important;}
	</style>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
</head>
<body>
<div class="wrap">
	<header>
		<a class="back" href="tools.html"><i class="fas fa-arrow-left"></i> Back to Tools</a>
		<h1><i class="fas fa-barcode"></i> Barcode Scanner</h1>
		<p class="muted">Scan barcodes from your camera or an uploaded image.</p>
	</header>

	<main>
		<!-- Camera section -->
		<div class="panel">
			<div class="actions" style="margin-bottom:1rem;">
				<button class="btn btn-primary" id="start-btn"><i class="fas fa-video"></i> Start Camera</button>
				<button class="btn btn-danger" id="stop-btn" style="display:none;"><i class="fas fa-stop"></i> Stop</button>
				<div style="flex:1;"></div>
				<div style="min-width:180px;" id="cam-select-wrap" hidden>
					<select id="cam-select"></select>
				</div>
			</div>
			<div class="camera-box" id="camera-box">
				<div id="scanner-region"></div>
			</div>
		</div>

		<!-- Upload section -->
		<div class="panel">
			<label><i class="fas fa-upload"></i> Or Upload an Image</label>
			<div class="drop-zone" id="drop-zone">
				<i class="fas fa-cloud-upload-alt"></i>
				<p>Click or drag &amp; drop a barcode image here</p>
			</div>
			<input type="file" id="file-input" class="file-input" accept="image/*">
		</div>

		<!-- Result -->
		<div class="result-panel" id="result-panel">
			<h3><i class="fas fa-check-circle"></i> Scanned Barcode</h3>
			<div class="result-text" id="result-text"></div>
			<div class="result-meta" id="result-meta"></div>
			<div id="result-link-wrap" style="display:none;margin-bottom:.75rem;">
				<a class="result-link" id="result-link" href="#" target="_blank" rel="noopener"></a>
			</div>
			<div class="actions">
				<button class="btn btn-primary" id="copy-btn"><i class="fas fa-copy"></i> Copy</button>
				<button class="btn btn-outline" id="search-btn"><i class="fas fa-search"></i> Search Online</button>
			</div>
		</div>

		<!-- Info -->
		<div class="info-box">
			<h4><i class="fas fa-info-circle"></i> Supported Barcode Types</h4>
			<ul>
				<li><strong>1D:</strong> Code 128, Code 39, EAN-13, EAN-8, UPC-A, UPC-E, ITF, Codabar</li>
				<li><strong>2D:</strong> QR Code, Data Matrix, Aztec, PDF 417</li>
			</ul>
		</div>
	</main>
</div>

<div class="toast" id="toast"><i class="fas fa-check-circle"></i> <span id="toast-msg"></span></div>

<script>
// Dynamic html5-qrcode loader
let qrLibLoaded = false;
function loadQrLib() {
  return new Promise(function(resolve, reject) {
    if (qrLibLoaded) return resolve();
    var s = document.createElement('script');
    s.src = 'https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js';
    s.onload = function() { qrLibLoaded = true; resolve(); };
    s.onerror = function() { reject(new Error('Failed to load scanner library')); };
    document.head.appendChild(s);
  });
}
</script>

<script>
(function(){
	'use strict';

	const cameraBox  = document.getElementById('camera-box');
	const startBtn   = document.getElementById('start-btn');
	const stopBtn    = document.getElementById('stop-btn');
	const camSelect  = document.getElementById('cam-select');
	const camWrap    = document.getElementById('cam-select-wrap');
	const dropZone   = document.getElementById('drop-zone');
	const fileInput  = document.getElementById('file-input');
	const resPanel   = document.getElementById('result-panel');
	const resText    = document.getElementById('result-text');
	const resMeta    = document.getElementById('result-meta');
	const resLink    = document.getElementById('result-link');
	const resLinkW   = document.getElementById('result-link-wrap');
	const copyBtn    = document.getElementById('copy-btn');
	const searchBtn  = document.getElementById('search-btn');

	let html5Scanner = null;
	let isScanning   = false;
	let currentData  = '';

	/* ---------- Populate camera list ---------- */
	async function listCameras() {
		try {
			const devices = await Html5Qrcode.getCameras();
			if (devices && devices.length > 1) {
				camWrap.hidden = false;
				camSelect.innerHTML = devices.map(d =>
					`<option value="${d.id}">${d.label || 'Camera'}</option>`
				).join('');
			}
			return devices;
		} catch(e) { return []; }
	}

	/* ---------- Start / Stop ---------- */
	async function startScanner() {
		try {
			await loadQrLib();
			const devices = await listCameras();
			if (!devices || devices.length === 0) {
				showToast('No cameras found');
				return;
			}
			const camId = camSelect.value || devices[0].id;

			cameraBox.style.display = 'block';
			startBtn.style.display = 'none';
			stopBtn.style.display = 'inline-flex';

			html5Scanner = new Html5Qrcode('scanner-region');
			await html5Scanner.start(
				camId,
				{ fps: 10, qrbox: { width: 280, height: 160 }, aspectRatio: 1.5 },
				(decodedText, decodedResult) => {
					displayResult(decodedText, decodedResult);
					stopScanner();
				},
				() => { /* ignore scan failures */ }
			);
			isScanning = true;
		} catch(e) {
			showToast('Camera access denied or error');
			console.error(e);
			stopScanner();
		}
	}

	async function stopScanner() {
		try {
			if (html5Scanner && isScanning) {
				await html5Scanner.stop();
			}
		} catch(e) { /* ignore */ }
		isScanning = false;
		html5Scanner = null;
		cameraBox.style.display = 'none';
		startBtn.style.display = 'inline-flex';
		stopBtn.style.display = 'none';
	}

	startBtn.addEventListener('click', startScanner);
	stopBtn.addEventListener('click', stopScanner);
	camSelect.addEventListener('change', async () => {
		await stopScanner();
		startScanner();
	});

	/* ---------- File / Drop upload ---------- */
	dropZone.addEventListener('click', () => fileInput.click());
	dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('dragover'); });
	dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
	dropZone.addEventListener('drop', e => {
		e.preventDefault();
		dropZone.classList.remove('dragover');
		handleFile(e.dataTransfer.files[0]);
	});
	fileInput.addEventListener('change', () => { if (fileInput.files[0]) handleFile(fileInput.files[0]); });

	async function handleFile(file) {
		if (!file || !file.type.startsWith('image/')) { showToast('Please select an image'); return; }
		await loadQrLib();
		const scanner = new Html5Qrcode('scanner-region-file-' + Date.now(), /* verbose= */ false);
		// Create a temporary element for the scanner
		const tempDiv = document.createElement('div');
		tempDiv.id = 'scanner-region-file-' + Date.now();
		tempDiv.style.display = 'none';
		document.body.appendChild(tempDiv);

		const tempScanner = new Html5Qrcode(tempDiv.id);
		tempScanner.scanFile(file, true)
			.then(decodedText => {
				displayResult(decodedText, null);
			})
			.catch(() => {
				showToast('No barcode found in image');
			})
			.finally(() => {
				tempDiv.remove();
			});
	}

	/* ---------- Display result ---------- */
	function displayResult(text, result) {
		currentData = text;
		resText.textContent = text;

		// Format detection
		let format = 'Unknown';
		if (result && result.result && result.result.format) {
			format = result.result.format.formatName || result.result.format.toString();
		}
		resMeta.textContent = format !== 'Unknown' ? `Format: ${format}` : '';

		const isURL = /^https?:\/\//i.test(text);
		resLinkW.style.display = isURL ? 'block' : 'none';
		if (isURL) { resLink.href = text; resLink.textContent = text; }

		resPanel.style.display = 'block';
		showToast('Barcode decoded!');
	}

	copyBtn.addEventListener('click', () => {
		navigator.clipboard.writeText(currentData).then(() => showToast('Copied to clipboard'));
	});

	searchBtn.addEventListener('click', () => {
		if (currentData) window.open('https://www.google.com/search?q=' + encodeURIComponent(currentData), '_blank');
	});

	/* ---------- Toast ---------- */
	let toastTimer;
	function showToast(msg) {
		const toast = document.getElementById('toast');
		document.getElementById('toast-msg').textContent = msg;
		toast.classList.add('show');
		clearTimeout(toastTimer);
		toastTimer = setTimeout(() => toast.classList.remove('show'), 2500);
	}
})();
</script>

<script src="js/global.js"></script>
</body>
</html>
